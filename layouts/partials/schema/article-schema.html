<script type="application/ld+json">
{{/* ✅ 平台到内容类型的映射字典 */}}
{{ $platformTypes := dict
  "YouTube" "video-guide"
  "TikTok" "shortform-strategy"
  "Instagram" "visual-marketing-guide"
  "Facebook" "ads-optimization-handbook"
  "Telegram" "community-engagement"
  "Twitter" "microblog-playbook"
  "LinkedIn" "b2b-outreach-guide"
  "Snapchat" "youth-marketing"
  "Reddit" "discussion-growth"
  "Pinterest" "visual-discovery-guide"
}}

{{/* ✅ 主平台 fallback（第一个平台）+ 内容类型匹配 */}}
{{ $mainPlatform := index (.Params.platforms | default (slice "YouTube")) 0 }}
{{ $contentType := index $platformTypes $mainPlatform | default "influencer-guide" }}

{{/* ✅ 安全 featuredImage 注入（无则默认） */}}
{{ $image := .Params.featuredImage | default "https://baoliba.com/logo.png" }}

{
  "@context": "https://schema.org",
  "@type": "Article",

  "headline": {{ .Title | default "Untitled" | plainify | jsonify }},
  "description": {{ .Params.description | default (.Summary | plainify) | jsonify }},
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",

  "author": {
    "@type": "Organization",
    "name": {{ .Params.author | default "BaoLiba" | jsonify }}
  },

  "publisher": {
    "@type": "Organization",
    "name": "BaoLiba",
    "logo": {
      "@type": "ImageObject",
      "url": "https://baoliba.com/logo.png"
    }
  },

  "image": {
    "@type": "ImageObject",
    "url": {{ $image | printf "%q" }}
  },

  "articleBody": {{ .Content | plainify | jsonify }},
  "keywords": {{ delimit (.Params.keywords | default (slice)) ", " | jsonify }},
  "articleSection": {{ .Params.categories | default "" | jsonify }},

  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },

  "inLanguage": {{ .Params.language | default "lv" | jsonify }},
  "countryOfOrigin": {{ .Params.country | default "Latvia" | jsonify }},
  "about": {{ delimit (.Params.platforms | default (slice "YouTube")) ", " | jsonify }},
  "name": {{ $contentType | jsonify }}
}
</script>
