<script type="application/ld+json">
{{/* ✅ 平台 → 内容类型映射表 */}}
{{ $platformTypes := dict
  "YouTube" "video-guide"
  "TikTok" "shortform-strategy"
  "Instagram" "visual-marketing-guide"
  "Facebook" "ads-optimization-handbook"
  "Telegram" "community-engagement"
  "Twitter" "microblog-playbook"
  "LinkedIn" "b2b-outreach-guide"
  "Snapchat" "youth-marketing"
  "Reddit" "discussion-growth"
  "Pinterest" "visual-discovery-guide"
}}

{{/* ✅ 多语言内容类型翻译表 */}}
{{ $translatedTypes := dict
  "video-guide" (dict "en" "Video Guide" "lv" "Video ceļvedis" "zh" "视频指南")
  "shortform-strategy" (dict "en" "Shortform Strategy" "lv" "Īso video stratēģija" "zh" "短视频策略")
  "visual-marketing-guide" (dict "en" "Visual Marketing Guide" "lv" "Vizuālā mārketinga ceļvedis" "zh" "视觉营销指南")
  "ads-optimization-handbook" (dict "en" "Ads Optimization Handbook" "lv" "Reklāmu optimizācijas rokasgrāmata" "zh" "广告优化手册")
  "community-engagement" (dict "en" "Community Engagement" "lv" "Kopienas iesaiste" "zh" "社区互动指南")
  "microblog-playbook" (dict "en" "Microblog Playbook" "lv" "Mikrobloga rokasgrāmata" "zh" "微博营销指南")
  "b2b-outreach-guide" (dict "en" "B2B Outreach Guide" "lv" "B2B sasniedzamības ceļvedis" "zh" "B2B拓展指南")
  "youth-marketing" (dict "en" "Youth Marketing" "lv" "Jauniešu mārketings" "zh" "年轻人营销")
  "discussion-growth" (dict "en" "Forum Growth Guide" "lv" "Diskusiju izaugsme" "zh" "社区增长指南")
  "visual-discovery-guide" (dict "en" "Visual Discovery Guide" "lv" "Vizuālās izpētes ceļvedis" "zh" "视觉探索指南")
  "social-media-marketing" (dict "en" "Social Media Marketing" "lv" "Sociālo mediju mārketings" "zh" "社交媒体营销")
}}

{{/* ✅ 主平台 */}}
{{ $mainPlatform := index (.Params.platforms | default (slice "YouTube")) 0 }}
{{ $baseType := index $platformTypes $mainPlatform }}
{{ if not $baseType }}
  {{ $baseType = "social-media-marketing" }}
{{ end }}

{{/* ✅ 多语言匹配 */}}
{{ $lang := .Params.language | default "lv" }}
{{ $contentTypeMap := index $translatedTypes $baseType }}
{{ $contentType := "" }}
{{ if $contentTypeMap }}
  {{ $contentType = index $contentTypeMap $lang }}
  {{ if not $contentType }}
    {{ $contentType = index $contentTypeMap "en" }}
  {{ end }}
{{ end }}
{{ if not $contentType }}
  {{ $contentType = "Social Media Marketing" }}
{{ end }}

{{/* ✅ 封面图处理 */}}
{{ $image := .Params.featuredImage | default "https://baoliba.com/logo.png" }}

{
  "@context": "https://schema.org",
  "@type": "Article",

  "headline": {{ .Title | default "Untitled" | plainify | jsonify }},
  "description": {{ .Params.description | default (.Summary | plainify) | jsonify }},
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",

  "author": {
    "@type": "Organization",
    "name": {{ .Params.author | default "BaoLiba" | jsonify }}
  },

  "publisher": {
    "@type": "Organization",
    "name": "BaoLiba",
    "logo": {
      "@type": "ImageObject",
      "url": "https://baoliba.com/logo.png"
    }
  },

  "image": {
    "@type": "ImageObject",
    "url": {{ $image | printf "%q" }}
  },

  "articleBody": {{ .Content | plainify | jsonify }},
  "keywords": {{ delimit (.Params.keywords | default (slice)) ", " | jsonify }},
  "articleSection": {{ .Params.categories | default "" | jsonify }},

  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },

  "inLanguage": {{ $lang | jsonify }},
  "countryOfOrigin": {{ .Params.country | default "Latvia" | jsonify }},
  "about": {{ delimit (.Params.platforms | default (slice "YouTube")) ", " | jsonify }},
  "name": {{ $contentType | jsonify }}
}
</script>

